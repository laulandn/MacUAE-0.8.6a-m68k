#ifndef DEVICE_H#define	DEVICE_H#include <ConnectionTools.h>#include <TerminalTools.h>#include <FileTransferTools.h>#include <CommResources.h>#include <CRMSerialDevices.h>#define	kMaxCOMPorts	10	/* maximale Anzahl an verwalteten COM-Ports */#define	BUFFERSIZE_DATAIN		/*65535*/32767/*16384*/	/* Angaben in Bytes */#define	BUFFERSIZE_DATAOUT		16384#define	BUFFERSIZE_CONTROLIN	0#define	BUFFERSIZE_CONTROLOUT	0#define	BUFFERSIZE_ATTENTIONIN	0#define	BUFFERSIZE_ATTENTIONOUT	0#define	BUFFERSIZE_RESERVEDIN	0#define	BUFFERSIZE_RESERVEDOUT	0typedef struct {	char	*gs_data;	long	gs_bufsize;	long	gs_buflen;	char	*gs_bufptr;	Handle	gs_bufferhandle;	} GetSerIn;typedef struct {	Str255		comPort;	long		baudRate;	long		dataBits;	long		parity;	long		stopBits;	long		handShake;	long		reserved[256];	} ConnConfig;	typedef struct {	long		reserved[256];	} TermConfig;	typedef struct {	long		reserved[256];	} FTConfig;	typedef struct {	ConnHandle				connHandle;	TermHandle				termHandle;	FTHandle				ftHandle;	int						connProcID;	int						termProcID;	int						ftProcID;	Str255					connToolName;	Str255					termToolName;	Str255					ftToolName;	GetSerIn				getSerIn;	Str255					comPort[kMaxCOMPorts];	FileTransferSendUPP		ftSendUPP;	FileTransferReceiveUPP	ftReceiveUPP;	ConnConfig				connConfig;	TermConfig				termConfig;	FTConfig				ftConfig;	} ComStruct;		// Bits für Schnittstellen-Funktionen#define HANDSHAKE_NONE			1#define HANDSHAKE_XONXOFF		2#define HANDSHAKE_DTRCTS		3#define HANDSHAKE_CTR			4#define HANDSHAKE_CTS			5#define	PARITY_NONE				1#define	PARITY_ODD				2#define	PARITY_EVEN				3#define	COMFLG_STATUSCD			0x00000001L#define	COMFLG_STATUSDSR		0x00000002L	/* device.c */void COM_InitCommToolbox(void);void COM_CloseCommToolbox(void);OSErr COM_SetNewConnectionTool(void *theHandle, char *toolname);void COM_CloseConnection(void *theHandle);OSErr COM_SetConfig(void *theHandle, void **theConfig);OSErr COM_SetBaudrate(void *theHandle, long baudRate);OSErr COM_SetDatabits(void *theHandle, long dataBits);OSErr COM_SetHandshake(void *theHandle, long handShake);OSErr COM_SetParity(void *theHandle, long parity);OSErr COM_SetStopbits(void *theHandle, long stopBits);OSErr COM_SetCOMPort(void *theHandle, char *portName);void COM_GetSerialPorts(void *theHandle);OSErr COM_Connect(void *theHandle);OSErr COM_Disconnect(void *theHandle);long COM_SendData(void *theHandle, char *data, long size);long COM_ReceiveData(void *theHandle, char *data, long size);long COM_AllocGetSerC(void *theHandle);int COM_GetSerC(void *theHandle);void COM_FreeGetSerC(void *theHandle);long COM_GetCOMPortNames(Str255 **theCOMPortArray);void *COM_GetComHandle(void);OSErr COM_StatusIsSet(void *theHandle, long theBit);#endif DEVICE_H
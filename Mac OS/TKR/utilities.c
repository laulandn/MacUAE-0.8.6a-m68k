/*****************************************************************//*	                       EasyApp		            The Macintosh Application Shell		            James E. Trudeau, Nebula, Inc.		With thanks to Eric Shapiro, Bill Worzel, Brad Mohr, Bill	Hofmann, and many more folks, including the fine people at	Apple's Developer Technical Support and Developer University.		Version 1.0  4/3/95*//*****************************************************************//*	utilities.c contains general utility functions for tasks such as	string manipulation and so forth.*/#include "utilities.h"/*****************************************************************//* EasyGetIndString *//*****************************************************************//*	Get an indexed string from an STR# resource. STR# strings are	indexed from 1, not zero. Uses the app's resource file only.		Requires:g.appResFile set correctly	Receives: STR# ID, index value, place to store string	Changes:  contents of myString	Returns:  nothing*/void EasyGetIndString(short resID, short index, Str255 myString){	short	saveResFile;short	appResFile = CurResFile();/* save the current resource file and use the app's */	saveResFile = CurResFile();	UseResFile(appResFile);/* get the string */	myString[0] = 0;	/* make sure it's empty to start, in case this fails */	GetIndString(myString, resID, index);	/* restore original resource file */	UseResFile(saveResFile);}/*****************************************************************//* EasyOSTypeToPString *//*****************************************************************//*	Convert an OSType into a pascal string	Requires: nothing	Receives: OSType value, pointer to string	Changes:  contents of string	Returns:  nothing*/void EasyOSTypeToPString(OSType aType, char *pString){	*pString = 0x04;	/* one byte, value 4, string is 4 characters long *//* Use BlockMove to avoid odd address error on 68000 machines */	BlockMoveData(&aType, &pString[1], 4);}/*****************************************************************//* EasyAppendString *//*****************************************************************//*	Add one pascal-style string to another. Truncates if length	exceeds 255 characters	Requires: two strings, source and destination	Receives: same	Changes:  contents of destination string	Returns:  nothing*/void EasyAppendString (Str255 original, Str255 added){	short numberBytes = added[0];	/* length of string to be added */	short totalLength = original[0] + numberBytes;	if (totalLength > 255)	/* too long, adjust number of bytes to add */	{		totalLength = 255;		numberBytes = totalLength - original[0];	}	BlockMoveData (&added[1], &original[totalLength-numberBytes + 1], numberBytes);	original[0] = totalLength;	/* new length of original string */}/*****************************************************************//* EasyGlobalToLocal *//*****************************************************************//*	Convert a point from global to local coordinates.	Requires: nothing	Receives: pointer to window, global point, pointer to local point	Changes:  contents of local point	Returns:  nothing*/void EasyGlobalToLocal (WindowPtr macWindow, Point globalPt, Point *localPt){	GrafPtr		oldPort;	/* preserve and set port */	GetPort(&oldPort);	SetPort(macWindow);	/* Convert the passed global point into local coords */	*localPt = globalPt;	GlobalToLocal(localPt);/* Restore the port */	SetPort(oldPort);}/*****************************************************************//* EasyLocalToGlobal *//*****************************************************************//*	Convert a point from local to global coordinates.	Requires: nothing	Receives: pointer to window, local point, pointer to global point	Changes:  contents of global point	Returns:  nothing*/void EasyLocalToGlobal (WindowPtr macWindow, Point localPt, Point *globalPt){	GrafPtr		oldPort;	/* preserve and set port */	GetPort(&oldPort);	SetPort(macWindow);	/* Convert the passed local point into global coords */	*globalPt = localPt;	LocalToGlobal(globalPt);/* Restore the port */	SetPort(oldPort);}
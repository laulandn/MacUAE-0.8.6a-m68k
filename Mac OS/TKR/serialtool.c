/***	File: serialtool.c****	Inhalt: Routinen zur Bedienung des Serial Tool der CTB.****	Autor: Christian Kaben**	Organisation: TKR GmbH & Co. KG, Kiel, Deutschland, Europa, Erde**	Datum Ersterstellung : 17.02.1998**	Datum letzte €nderung: 20.07.1998***/#include <ConnectionTools.h>//#include <TerminalTools.h>//#include <FileTransferTools.h>#include <CommResources.h>#include <CRMSerialDevices.h>#include "serialtool.h"#include "device.h"#include <stdlib.h>#include <string.h>#include <stdio.h>/*****************************************************************/OSErr SRT_SetConfig(ConnHandle connHandle, char *theString){	OSErr	error = -1;	if(theString)	{		error = CMSetConfig(connHandle,theString);	}		return(error);}/*****************************************************************/OSErr SRT_SetBaudrate(ConnHandle connHandle, long baudRate){	OSErr	error = 0;//	char	string[32];char	string[32] = "Baud 57600";		sprintf(string,"Baud %ld",baudRate);	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetDatabits(ConnHandle connHandle, long dataBits){	OSErr	error = 0;	char	string[32];		sprintf(string,"DataBits %ld",dataBits);	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetHandshake(ConnHandle connHandle, long handShake){	OSErr	error = 0;	char	string[32];		switch(handShake)	{		case HANDSHAKE_NONE:			strcpy(string,"Handshake None");			break;		case HANDSHAKE_XONXOFF:			strcpy(string,"Handshake XON/XOFF");			break;		case HANDSHAKE_DTRCTS:			strcpy(string,"Handshake DTR&CTS");			break;		case HANDSHAKE_CTR:			strcpy(string,"Handshake DTROnly");			break;		case HANDSHAKE_CTS:			strcpy(string,"Handshake CTSOnly");			break;		default:			return(-1);			break;	}	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetParity(ConnHandle connHandle, long parity){	OSErr	error = 0;	char	string[32];		switch(parity)	{		case PARITY_NONE:			strcpy(string,"Parity None");			break;		case PARITY_ODD:			strcpy(string,"Parity Odd");			break;		case PARITY_EVEN:			strcpy(string,"Parity Even");			break;		default:			return(-1);			break;	}	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetPort(ConnHandle connHandle, char *port){	OSErr	error = 0;	char	string[64];		sprintf(string,"Port \"%s\"",port);	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetStopbits(ConnHandle connHandle, long stopBits){	OSErr	error = 0;	char	string[32];		sprintf(string,"Stopbits %ld",stopBits);	if(stopBits == 15)	{		strcpy(string,"Stopbits 1.5");	}	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetConnection(ConnHandle connHandle, Boolean holdConnection){	OSErr	error = 0;	char	string[32];		if(holdConnection)	{		strcpy(string,"HoldConnection True");	}	else	{		strcpy(string,"HoldConnection False");	}	error = SRT_SetConfig(connHandle,string);	return(error);}/*****************************************************************/OSErr SRT_SetDisconnect(ConnHandle connHandle, Boolean remindDisconnect){	OSErr	error = 0;	char	string[32];		if(remindDisconnect)	{		strcpy(string,"RemindDisconnect True");	}	else	{		strcpy(string,"RemindDisconnect False");	}	error = SRT_SetConfig(connHandle,string);	return(error);}